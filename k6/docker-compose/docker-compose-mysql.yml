# To execute this docker-compose yml file use `docker-compose -f docker-compose.yml up`
# Add the `-d` flag at the end for detached execution
# To stop the execution, hit Ctrl+C, and then `docker-compose -f docker-compose.yml down`
version: "2.2"

networks:
  memory_test_default:
    driver: bridge

services:

# ---------------------------------------------------

  memory-test-mysql:
    image: mysql:latest
    container_name: memory-test-mysql
    mem_limit: 512m
    cpus: 1
    shm_size: 1gb
    # volumes:
    #   - ~/database/docker-memory:/var/lib/mysql
    # environment:
    #   - MYSQL_ROOT_PASSWORD=rootpass
    #   - MYSQL_DATABASE=docker-memory
    #   - MYSQL_USER=docker-memory
    #   - MYSQL_PASSWORD=docker-memory
    env_file:
      - docker-compose-mysql.env
    ports:
      - "3306:3306"
    networks:
      - memory_test_default
    extra_hosts:
      - "host.docker.internal:host-gateway"

